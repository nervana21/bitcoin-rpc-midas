# Bitcoin-RPC-Midas

[![License: MIT](https://img.shields.io/badge/license-MIT-blue)](LICENSE)
[![Docs.rs](https://img.shields.io/docsrs/bitcoin-rpc-midas)](https://docs.rs/bitcoin-rpc-midas)
[![crates.io](https://img.shields.io/crates/v/bitcoin-rpc-midas)](https://crates.io/crates/bitcoin-rpc-midas)

Type-safe Rust client for Bitcoin Core v29 RPCs, with test node support. Generated from a version-flexible toolchain.

## Why Use This?

Compared to hand-written RPC clients, this toolchain offers:

- Reduced repetition
- Fewer versioning issues
- Increased compile-time checks
- Simplified local testing with embedded regtest
- Improved isolation from environment and port conflicts
- Built-in RPC batching to reduce network roundtrips

These features are intended to make Bitcoin Core RPCs easier to integrate, test, and maintain in Rust projects. The intended result is a client that remains aligned with upstream changes and is suitable for production use.

## Architecture

The crate is organized into focused modules:

- `client_trait/`: Trait definitions for type-safe RPC method calls
- `node/`: Regtest node management and test configuration
- `test_node/`: Integration testing helpers with embedded Bitcoin nodes
- `transport/`: Async RPC transport with error handling and batching
- `types/`: Generated type definitions for all RPC responses

## Quick Start

```rust
use anyhow::Result;
use bitcoin_rpc_midas::*;

#[tokio::main]
async fn main() -> Result<()> {
    // Creates and manages a regtest node automatically
    let client = BitcoinTestClient::new().await?;
    
    // Ensure a wallet exists before using wallet functionality
    let _wallet_name = client.ensure_default_wallet("test_wallet").await?;
    
    // Type-safe RPC calls with compile-time guarantees
    let blockchain_info = client.getblockchaininfo().await?;
    let wallet_info = client.getwalletinfo().await?;
    
    println!("Blockchain: {:#?}", blockchain_info);
    println!("Wallet: {:#?}", wallet_info);
    
    Ok(())
}
```

## Installation

Add to your `Cargo.toml`:

```toml
[dependencies]
bitcoin-rpc-midas = "0.1.3"
```

## About

This crate is generated by [bitcoin-rpc-codegen](https://github.com/nervana21/bitcoin-rpc-codegen), which systematically derives type-safe clients from Bitcoin Core's RPC specification. The generator ensures consistency, reduces duplication, and maintains alignment with upstream changes.

## Contributing

Contributors are warmly welcome, see [CONTRIBUTING.md](CONTRIBUTING.md).

## License

Bitcoin RPC Code Generator is released under the terms of the MIT license. See [LICENSE](LICENSE) for more information or see https://opensource.org/license/MIT.

## Security

This library communicates directly with `bitcoind`.
**For mainnet use,** audit the code carefully, restrict RPC access to trusted hosts, and avoid exposing RPC endpoints to untrusted networks.
